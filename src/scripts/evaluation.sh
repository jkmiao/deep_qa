#!/bin/bash -e

RESULTS_DIR=results/

mkdir -p $RESULTS_DIR

PRED_MODEL_NAME="predicate_d=300_iter=100_l2=1e-4"
QUERY_MODEL_NAME="query_d=300_iter=100_l2=1e-4"

MODEL_DIR=output/
PRED_MODEL_FILENAME=$MODEL_DIR/predicate_small/out_$PRED_MODEL_NAME.ser
QUERY_MODEL_FILENAME=$MODEL_DIR/query_small/out_$QUERY_MODEL_NAME.ser
BASELINE_MODEL_FILENAME=$MODEL_DIR/baseline_small/baseline.txt
# CW_MODEL_FILENAME=~/data/universal_schema/clueweb/models/100114/cw_baseline.lisp

DATA_DIR=data/
ORIG_DATA=data/tacl2015-training-sample.txt
PRED_DATA_DIR=$DATA_DIR/predicate_small/
QUERY_DATA_DIR=$DATA_DIR/query_small/
QUERY_JSON=data/tacl2015-test.txt

BASELINE_RESULTS=$RESULTS_DIR/baseline.txt
PRED_RESULTS=$RESULTS_DIR/$PRED_MODEL_NAME.txt
QUERY_RESULTS=$RESULTS_DIR/$QUERY_MODEL_NAME.txt
# CW_RESULTS=$RESULTS_DIR/cw.txt
ENSEMBLE_PRED_RESULTS=$RESULTS_DIR/ensemble_$PRED_MODEL_NAME.txt
ENSEMBLE_QUERY_RESULTS=$RESULTS_DIR/ensemble_$QUERY_MODEL_NAME.txt

./src/scripts/evaluation.py $PRED_MODEL_FILENAME $BASELINE_MODEL_FILENAME $QUERY_JSON $ORIG_DATA $PRED_DATA_DIR ccg |tee $BASELINE_RESULTS

# ./src/scripts/us/evaluation.py $PRED_MODEL_FILENAME $CW_MODEL_FILENAME $QUERY_JSON $DATA_DIR ccg # |tee $CW_RESULTS &

./src/scripts/evaluation.py $PRED_MODEL_FILENAME $BASELINE_MODEL_FILENAME $QUERY_JSON $ORIG_DATA $PRED_DATA_DIR us |tee $PRED_RESULTS
#./src/scripts/evaluation.py $QUERY_MODEL_FILENAME $BASELINE_MODEL_FILENAME $QUERY_JSON $ORIG_DATA $QUERY_DATA_DIR us |tee $QUERY_RESULTS

./src/scripts/evaluation.py $PRED_MODEL_FILENAME $BASELINE_MODEL_FILENAME $QUERY_JSON $ORIG_DATA $PRED_DATA_DIR ensemble |tee $ENSEMBLE_PRED_RESULTS
#./src/scripts/evaluation.py $QUERY_MODEL_FILENAME $BASELINE_MODEL_FILENAME $QUERY_JSON $ORIG_DATA $QUERY_DATA_DIR ensemble |tee $ENSEMBLE_QUERY_RESULTS

